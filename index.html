<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Minecraft –•—Ä–æ–Ω–∏–∫–∏</title>
    <link rel="icon" href="favicon.png" type="image/png">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <img src="logo.png" alt="Minecraft –•—Ä–æ–Ω–∏–∫–∏" class="logo">
        <h1 class="title">–ò—Å—Ç–æ—Ä–∏—è –≤–µ—Ä—Å–∏–π Minecraft</h1>

        <div class="controls">
            <input type="text" id="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –≤–µ—Ä—Å–∏–∏ –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—é..." onkeyup="filterVersions()">
            <button onclick="randomVersion()">üé≤ –°–ª—É—á–∞–π–Ω–∞—è</button>
            <button onclick="window.location.href='mechanics.html'">‚öôÔ∏è –ú–µ—Ö–∞–Ω–∏–∫–∏</button>
            <button id="theme-toggle" onclick="toggleTheme()">üåô / ‚òÄÔ∏è</button>
        </div>

        <div class="updates" id="versions-list">
            <a href="1.16.html" class="update-card fade-in" data-version="1.16" data-title="Nether Update">
                <h2>Minecraft 1.16</h2>
                <p class="subtitle">Nether Update</p>
            </a>
            <a href="1.17.html" class="update-card fade-in" data-version="1.17" data-title="Caves & Cliffs: Part I">
                <h2>Minecraft 1.17</h2>
                <p class="subtitle">Caves & Cliffs: Part I</p>
            </a>
            <a href="1.18.html" class="update-card fade-in" data-version="1.18" data-title="Caves & Cliffs: Part II">
                <h2>Minecraft 1.18</h2>
                <p class="subtitle">Caves & Cliffs: Part II</p>
            </a>
            <a href="1.19.html" class="update-card" data-version="1.19" data-title="The Wild Update">
                <h2>Minecraft 1.19</h2>
                <p class="subtitle">The Wild Update</p>
            </a>
            <a href="1.20.html" class="update-card" data-version="1.20" data-title="Trails & Tales">
                <h2>Minecraft 1.20</h2>
                <p class="subtitle">Trails & Tales</p>
            </a>
        </div>

        <footer class="footer">
            <p>–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π Minecraft ‚Ä¢ –ê–≤—Ç–æ—Ä: Ironcarrier</p>
        </footer>

        <div class="terminal-chat" id="version-summon-chat">
            <div class="terminal-input typing-animation">
                /summon minecraft:version_1.20
            </div>
        </div>
        
        <div class="metaball-animation">
            <svg viewBox="0 0 500 500">
                <g class class="arm">
                    <line class="segment" x1="250" y1="250" x2="300" y2="250"></line>
                    <circle class="joint" cx="250" cy="250" r="64"></circle>
                    <g class="arm1">
                        <line class="segment" x1="300" y1="250" x2="400" y2="250"></line>
                        <circle class="joint" cx="300" cy="250" r="30"></circle>
                        <g class="arm2">
                            <line class="segment" x1="400" y1="250" x2="490" y2="250"></line>
                            <circle class="joint" cx="400" cy="250" r="24"></circle>
                            <g class="arm3">
                                <line class="segment" x1="490" y1="250" x2="550" y2="250"></line>
                                <circle class="joint" cx="490" cy="250" r="16"></circle>
                            </g>
                        </g>
                        <g class="arm1">
                            <line class="segment" x1="300" y1="250" x2="400" y2="250"></line>
                            <circle class="joint" cx="300" cy="250" r="30"></circle>
                            <g class="arm2">
                                <line class="segment" x1="400" y1="250" x2="490" y2="250"></line>
                                <circle class="joint" cx="400" cy="250" r="8"></circle>
                                <g class="arm3">
                                    <line class="segment" x1="490" y1="250" x2="550" y2="250"></line>
                                    <circle class="joint" cx="490" cy="250" r="8"></circle>
                                </g>
                                <g class="arm2">
                                    <line class="segment" x1="400" y1="250" x2="490" y2="250"></line>
                                    <circle class="joint" cx="400" cy="250" r="8"></circle>
                                    <g class="arm3">
                                        <line class="segment" x1="490" y1="250" x2="550" y2="250"></line>
                                        <circle class="joint" cx="490" cy="250" r="8"></circle>
                                    </g>
                                </g>
                            </g>
                        </g>
                    </g>
                </g>
                <g id="mir" class="arm">
                    <line class="segment" x1="250" y1="250" x2="300" y2="250"></line>
                    <circle class="joint" cx="250" cy="250" r="64"></circle>
                    <g class="arm1">
                        <line class="segment" x1="300" y1="250" x2="400" y2="250"></line>
                        <circle class="joint" cx="300" cy="250" r="30"></circle>
                        <g class="arm2">
                            <line class="segment" x1="400" y1="250" x2="490" y2="250"></line>
                            <circle class="joint" cx="400" cy="250" r="24"></circle>
                            <g class="arm3">
                                <line class="segment" x1="490" y1="250" x2="550" y2="250"></line>
                                <circle class="joint" cx="490" cy="250" r="16"></circle>
                            </g>
                        </g>
                        <g class="arm1">
                            <line class="segment" x1="300" y1="250" x2="400" y2="250"></line>
                            <circle class="joint" cx="300" cy="250" r="30"></circle>
                            <g class="arm2">
                                <line class="segment" x1="400" y1="250" x2="490" y2="250"></line>
                                <circle class="joint" cx="400" cy="250" r="8"></circle>
                                <g class="arm3">
                                    <line class="segment" x1="490" y1="250" x2="550" y2="250"></line>
                                    <circle class="joint" cx="490" cy="250" r="8"></circle>
                                </g>
                                <g class="arm2">
                                    <line class="segment" x1="400" y1="250" x2="490" y2="250"></line>
                                    <circle class="joint" cx="400" cy="250" r="8"></circle>
                                    <g class="arm3">
                                        <line class="segment" x1="490" y1="250" x2="550" y2="250"></line>
                                        <circle class="joint" cx="490" cy="250" r="8"></circle>
                                    </g>
                                </g>
                            </g>
                        </g>
                    </g>
                </g>
                <filter id="metaball">
                    <feGaussianBlur
                        in="SourceGraphic"
                        stdDeviation="17"
                        result="blur"
                    ></feGaussianBlur>
                    <feColorMatrix
                        in="blur"
                        mode="matrix"
                        values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 100 -7"
                        result="fluid"
                    ></feColorMatrix>
                    <feComposite in="SourceGraphic" in2="fluid" operator="atop"></feComposite>
                </filter>
            </svg>
        </div>
        
    </div>
    
    <script>
        function filterVersions() {
            const input = document.getElementById('search');
            const filter = input.value.toLowerCase();
            const cards = document.querySelectorAll('.update-card');
            
            cards.forEach(card => {
                const title = card.getAttribute('data-title').toLowerCase();
                const version = card.getAttribute('data-version').toLowerCase(); 
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–æ—è–≤–∏–ª–∞—Å—å –ª–∏ –∫–∞—Ä—Ç–æ—á–∫–∞ —á–µ—Ä–µ–∑ JS, —á—Ç–æ–±—ã –Ω–µ –º–µ–Ω—è—Ç—å –µ–µ display: block
                const isAnimated = card.classList.contains('spawned') || card.classList.contains('summoned');
                
                // –ï—Å–ª–∏ –∫–∞—Ä—Ç–æ—á–∫–∞ –µ—â–µ –Ω–µ –ø–æ—è–≤–∏–ª–∞—Å—å, –∏–ª–∏ –µ—Å–ª–∏ –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–∫—Ä—ã—Ç–∞, —É–ø—Ä–∞–≤–ª—è–µ–º display
                if (card.classList.contains('fade-in') || isAnimated) {
                     card.style.display = (title.includes(filter) || version.includes(filter)) ? 'block' : 'none';
                }
            });
        }

        function randomVersion() {
            const cards = document.querySelectorAll('.update-card');
            // –£—á–∏—Ç—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ –∫–∞—Ä—Ç–æ—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –ø–æ—è–≤–∏–ª–∏—Å—å (fade-in, spawned, summoned)
            const visibleCards = Array.from(cards).filter(card => 
                card.classList.contains('fade-in') || 
                card.classList.contains('spawned') || 
                card.classList.contains('summoned')
            );
            
            if (visibleCards.length > 0) {
                const randomIndex = Math.floor(Math.random() * visibleCards.length);
                window.location.href = visibleCards[randomIndex].href;
            }
        }

        function toggleTheme() {
            document.body.classList.toggle('light-theme');
            const btn = document.getElementById('theme-toggle');
            if (document.body.classList.contains('light-theme')) {
                btn.textContent = '‚òÄÔ∏è';
                localStorage.setItem('theme', 'light');
            } else {
                btn.textContent = 'üåô';
                localStorage.setItem('theme', 'dark');
            }
        }
        
        // –ü–æ—è–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ 1.19 —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º —Å–ø–∞–≤–Ω–∞ –º–æ–±–∞
        function spawnVersion119() {
            const card119 = document.querySelector('.update-card[data-version="1.19"]');
            if (card119 && !card119.classList.contains('spawned')) {
                card119.classList.add('spawned');
            }
        }
        
        // –ü—Ä–∏–∑—ã–≤ –∫–∞—Ä—Ç–æ—á–∫–∏ 1.20 —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª
        function summonVersion120() {
            const chat = document.getElementById('version-summon-chat');
            const card120 = document.querySelector('.update-card[data-version="1.20"]');
            
            if (!card120 || card120.classList.contains('summoned')) {
                return;
            }

            // 1. –ü–æ—è–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞ (—Ç–µ—Ä–º–∏–Ω–∞–ª–∞)
            chat.classList.add('is-active');

            // 2. –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–µ—á–∞—Ç–∏ –∏ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
            const typingDuration = 3000; 
            const disappearDuration = 500;
            const totalChatTime = typingDuration + 1000; // 4 —Å–µ–∫—É–Ω–¥—ã (–ø–µ—á–∞—Ç—å + –∑–∞–¥–µ—Ä–∂–∫–∞)
            
            // 3. –ò—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ —á–∞—Ç–∞
            setTimeout(() => {
                chat.classList.remove('is-active');
                chat.classList.add('is-disappearing');
            }, totalChatTime); 

            // 4. –ü–æ—è–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ 1.20
            setTimeout(() => {
                chat.classList.remove('is-disappearing');
                card120.classList.add('summoned');
            }, totalChatTime + disappearDuration); // 4.5 —Å–µ–∫—É–Ω–¥—ã
        }
        
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –ø–æ—è–≤–ª–µ–Ω–∏—è
        function initializeVersionSequence() {
            // 1. –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –¥–ª—è 1.16, 1.17, 1.18. 
            const initialCards = document.querySelectorAll('.update-card.fade-in');
            initialCards.forEach((card, index) => {
                // –ó–∞–¥–∞–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è
                card.style.animationDelay = `${index * 0.2}s`;
            });

            // 2. –ü–æ—è–≤–ª–µ–Ω–∏–µ 1.19 (Mob Spawn) —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
            setTimeout(spawnVersion119, 2000); 

            // 3. –ü–æ—è–≤–ª–µ–Ω–∏–µ 1.20 (Summon Command) —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
            setTimeout(summonVersion120, 5000);
        }

        document.addEventListener('DOMContentLoaded', () => {
            if (localStorage.getItem('theme') === 'light') {
                document.body.classList.add('light-theme');
                document.getElementById('theme-toggle').textContent = '‚òÄÔ∏è';
            }
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏—è
            initializeVersionSequence(); 
        });
    </script>
</body>
</html>