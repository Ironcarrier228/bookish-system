<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Minecraft Sky Realm — Versions</title>
<meta name="description" content="Multilingual Minecraft changelogs with heavy transitions" />
<link rel="icon" href="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect rx='6' width='32' height='32' fill='%2300417f'/><text x='50%' y='55%' font-size='14' text-anchor='middle' fill='%23fff' font-family='Segoe UI'>MC</text></svg>">
<style>
:root{
  --bg1:#041026; --bg2:#07142a;
  --accent1:#00e5ff; --accent2:#8b5cff;
  --muted:#98aebf; --card:rgba(255,255,255,0.03);
  --glass: rgba(255,255,255,0.02);
  --radius:12px; --maxw:1180px; --ff: "Segoe UI", Roboto, Arial, sans-serif;
  --anim-out-time:0.82s; --anim-in-time:0.78s;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; font-family:var(--ff); color:#eaf6ff;
  background: linear-gradient(180deg,var(--bg1),var(--bg2));
  -webkit-font-smoothing:antialiased;
  overflow-x:hidden;
}

/* Parallax floating background layer */
.bg-layer {
  position:fixed; inset:0; z-index:-3;
  background-image: url('images/sky_parallax.jpg'); /* add your parallax background here */
  background-size:cover; background-position:center top;
  transform-origin: center;
  filter:brightness(.6) contrast(.95) saturate(1.05);
  will-change:transform;
}

/* subtle animated overlay clouds */
.bg-clouds {
  position:fixed; inset:0; z-index:-2; pointer-events:none;
  background-image: linear-gradient(rgba(10,14,20,0.0), rgba(10,14,20,0.06));
}

/* Header - clear, not glassy */
header.site {
  position:fixed; top:0; left:0; right:0; height:72px; z-index:1200;
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  padding:10px 20px; background: linear-gradient(180deg, rgba(2,6,12,0.25), rgba(2,6,12,0.15));
  border-bottom:1px solid rgba(255,255,255,0.03);
}
.brand { display:flex; gap:12px; align-items:center; }
.logo {
  width:44px; height:44px; border-radius:10px; display:flex; align-items:center; justify-content:center;
  background: linear-gradient(135deg,var(--accent1),var(--accent2)); font-weight:800; color:#021428;
  box-shadow: 0 8px 30px rgba(139,92,255,0.08);
}
.title { font-weight:800; font-size:1.05rem; }
.top-controls { display:flex; gap:10px; align-items:center; }

/* nav buttons (clear) */
nav.top-nav { display:flex; gap:12px; align-items:center; }
nav.top-nav button {
  background:transparent; border:0; color:var(--muted); font-weight:700; cursor:pointer; padding:8px 10px; border-radius:8px;
}
nav.top-nav button:hover{ color:var(--accent1); text-shadow:0 0 6px rgba(0,229,255,0.08); transform:translateY(-2px); }

/* search inline */
.search-inline { display:flex; align-items:center; gap:8px; padding:6px; background:var(--glass); border-radius:10px; border:1px solid rgba(255,255,255,0.02); }
.search-inline input { background:transparent; border:0; color: #eaf6ff; outline:0; padding:6px; width:220px; }

/* main container */
.main { max-width:var(--maxw); margin:100px auto 80px; padding:18px; position:relative; z-index:10; width:100%; }

/* hero */
.hero { padding:22px; border-radius:12px; background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.008)); border:1px solid rgba(255,255,255,0.02); box-shadow: 0 20px 60px rgba(2,6,23,0.6); }
.hero h1 { margin:0 0 8px; font-size:1.6rem; color:var(--accent1); text-shadow:0 4px 28px rgba(0,229,255,0.04); }
.hero p { color:var(--muted); margin:0 0 12px; }

/* grid */
.grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap:14px; margin-top:16px; }

/* card */
.card { background: linear-gradient(180deg, rgba(255,255,255,0.012), rgba(255,255,255,0.006)); border-radius:12px; padding:14px; border:1px solid rgba(255,255,255,0.02); }
.card h3 { margin:0 0 8px; color:var(--accent2); }
.card p { color:var(--muted); }

/* version pages */
.version { display:none; opacity:0; transform:translateY(18px) scale(.995); transition: all .6s cubic-bezier(.2,.9,.2,1); }
.version.active { display:block; opacity:1; transform:none; }

/* split layout */
.vwrap { display:flex; gap:18px; margin-top:12px; flex-wrap:wrap; }
.left { flex:1 1 560px; min-width:260px; }
.right { width:320px; min-width:220px; align-self:flex-start; }

/* screenshot */
.sshot { border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.03); box-shadow: 0 12px 40px rgba(2,6,23,0.55); }
.sshot img { width:100%; height:auto; display:block; transition: transform .45s ease, filter .45s ease; }
.sshot img:hover{ transform:scale(1.02); filter:brightness(1.07); }

/* lists */
.features ul { padding-left:18px; color:var(--muted); }
.notes { margin-top:12px; color:var(--muted); background: rgba(255,255,255,0.01); padding:10px; border-radius:10px; border:1px solid rgba(255,255,255,0.02); }

/* actions */
.actions { display:flex; gap:10px; margin-top:12px; flex-wrap:wrap; }
.btn { background: linear-gradient(90deg,var(--accent1),var(--accent2)); color:#06151f; border:0; padding:10px 12px; border-radius:10px; font-weight:800; cursor:pointer; }
.btn.ghost { background:transparent; color:var(--muted); border:1px solid rgba(255,255,255,0.03); }

/* footer */
.footer { text-align:center; color:var(--muted); margin-top:36px; padding:20px; }

/* heavy transitions (refined) */
@keyframes outAnim {
  0%{ transform:none; opacity:1; filter:none; }
  40%{ transform: translateY(-8vh) rotate(-6deg) scale(.96); opacity:.8; filter: blur(2px) grayscale(.05); }
  100%{ transform: translateY(-48vh) rotate(-34deg) scale(.5); opacity:0; filter: blur(14px) grayscale(.4); }
}
@keyframes inAnim {
  0%{ transform: translateY(40vh) rotate(18deg) scale(.6); opacity:0; filter: blur(12px) grayscale(.6); }
  60%{ transform: translateY(6vh) rotate(-6deg) scale(.9); opacity:.7; filter: blur(3px); }
  100%{ transform:none; opacity:1; filter:none; }
}
.anim-out { animation: outAnim var(--anim-out-time) cubic-bezier(.22,.9,.2,1) forwards; transform-origin:center; }
.anim-in { animation: inAnim var(--anim-in-time) cubic-bezier(.18,.9,.25,1) forwards; transform-origin:center; }

/* responsive */
@media(max-width:900px){
  .right{ width:100%; }
  .search-inline input{ width:120px; }
  .top-controls{ gap:6px }
}
@media(max-width:520px){
  header.site{ height:auto; padding:12px; flex-direction:column; gap:8px; align-items:flex-start; }
  .brand{ gap:8px }
  .search-inline input{ width:90px }
}
</style>
</head>
<body>

<div class="bg-layer" id="bgLayer"></div>
<div class="bg-clouds"></div>

<header class="site">
  <div class="brand">
    <div class="logo">MC</div>
    <div class="title" id="siteTitle">Minecraft Sky Realm</div>
  </div>

  <div class="top-controls">
    <nav class="top-nav" role="navigation" aria-label="Top">
      <button data-page="home" class="navbtn">Home</button>
      <button data-page="about" class="navbtn">About</button>
      <button data-page="versions" class="navbtn">Versions</button>
      <button data-page="contact" class="navbtn">Contact</button>
    </nav>

    <div class="search-inline" title="Search">
      <input id="globalSearch" placeholder="Search versions / news (type & Enter)" />
    </div>

    <select id="lang" aria-label="Language select" title="Language">
      <option value="en">EN</option>
      <option value="ru">RU</option>
      <option value="uk">UK</option>
      <option value="kk">KK</option>
      <option value="es">ES</option>
    </select>
  </div>
</header>

<main class="main" id="main">
  <!-- HOME -->
  <section id="home" class="page active">
    <div class="hero">
      <h1 id="ui_hero_title">Versions & AI — Minecraft Sky Realm</h1>
      <p id="ui_hero_lead">Choose a version below or use the search. Replace screenshots in /images/ with your own.</p>
      <div style="margin-top:12px; display:flex; gap:8px; flex-wrap:wrap;">
        <button class="btn" data-target="v1.16.5">1.16.5</button>
        <button class="btn" data-target="v1.17">1.17</button>
        <button class="btn" data-target="v1.18">1.18</button>
        <button class="btn" data-target="v1.19">1.19</button>
        <button class="btn" data-target="v1.20">1.20</button>
      </div>
    </div>

    <div class="grid" style="margin-top:16px;">
      <div class="card">
        <h3 id="ui_latest_title">Latest highlights</h3>
        <p id="ui_latest_text" style="color:var(--muted)">15 Oct 2025 — Mojang testing new world gen; 10 Sep 2025 — New frog variants.</p>
      </div>

      <div class="card">
        <h3 id="ui_ai_title">AI in Minecraft</h3>
        <p id="ui_ai_text" style="color:var(--muted)">Mods: NPC chat, builders, MineGPT and AI-assisted redstone.</p>
      </div>

      <div class="card">
        <h3 id="ui_about_title">About</h3>
        <p id="ui_about_text" style="color:var(--muted)">Fan-made project by Ironcarrier. Built manually with HTML/CSS/JS.</p>
      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section id="about" class="page">
    <h2 id="ui_about_h">About the project</h2>
    <p id="ui_about_body">This site was created by Ironcarrier as a fan project. It took many hours and a lot of trial & error — all done manually. You can edit any text and replace screenshots in the images folder.</p>
    <!-- optional image -->
    <div style="margin-top:12px" class="sshot"><img src="images/about.jpg" alt="About - placeholder (replace with your image)"></div>
  </section>

  <!-- VERSIONS -->
  <section id="versions" class="page">
    <h2 id="ui_versions_h">Version history</h2>

    <!-- V1.16.5 -->
    <article id="v1.16.5" class="version">
      <div class="vhead"><h3 id="v1165_title">Minecraft 1.16.5 — Nether Update</h3><div class="meta">Release: 15 Jan 2021</div></div>
      <div class="vwrap">
        <div class="left">
          <div class="sshot"><img src="images/1.16.5.jpg" alt="1.16.5 screenshot (replace)"></div>
          <div class="features"><h4>Main highlights</h4><ul id="v1165_features"></ul></div>
        </div>
        <aside class="right">
          <h4>Why it mattered</h4>
          <p id="v1165_why">Nether Update transformed the Nether into an explorable dimension with unique biomes and resources.</p>
          <div class="notes" id="v1165_notes">Many servers remained on 1.16.x for plugin compatibility; 1.16.5 was a stable LTS variant.</div>
          <div class="actions">
            <button class="btn ghost" data-target="versions">Back</button>
            <button class="btn" data-target="v1.17">Next: 1.17 →</button>
          </div>
        </aside>
      </div>
    </article>

    <!-- V1.17 -->
    <article id="v1.17" class="version">
      <div class="vhead"><h3 id="v117_title">Minecraft 1.17 — Caves & Cliffs I</h3><div class="meta">Release: 8 Jun 2021</div></div>
      <div class="vwrap">
        <div class="left">
          <div class="sshot"><img src="images/1.17.jpg" alt="1.17 screenshot (replace)"></div>
          <div class="features"><h4>Main highlights</h4><ul id="v117_features"></ul></div>
        </div>
        <aside class="right">
          <h4>Why it mattered</h4>
          <p id="v117_why">Added materials and mobs that expanded exploration and building before terrain overhaul.</p>
          <div class="actions">
            <button class="btn ghost" data-target="v1.16.5">← Back</button>
            <button class="btn" data-target="v1.18">Next: 1.18 →</button>
          </div>
        </aside>
      </div>
    </article>

    <!-- V1.18 -->
    <article id="v1.18" class="version">
      <div class="vhead"><h3 id="v118_title">Minecraft 1.18 — Caves & Cliffs II</h3><div class="meta">Release: 30 Nov 2021</div></div>
      <div class="vwrap">
        <div class="left">
          <div class="sshot"><img src="images/1.18.jpg" alt="1.18 screenshot (replace)"></div>
          <div class="features"><h4>Main highlights</h4><ul id="v118_features"></ul></div>
        </div>
        <aside class="right">
          <h4>Why it mattered</h4>
          <p id="v118_why">Generational change to world generation, caves and mountain systems.</p>
          <div class="actions">
            <button class="btn ghost" data-target="v1.17">← Back</button>
            <button class="btn" data-target="v1.19">Next: 1.19 →</button>
          </div>
        </aside>
      </div>
    </article>

    <!-- V1.19 -->
    <article id="v1.19" class="version">
      <div class="vhead"><h3 id="v119_title">Minecraft 1.19 — The Wild Update</h3><div class="meta">Release: 7 Jun 2022</div></div>
      <div class="vwrap">
        <div class="left">
          <div class="sshot"><img src="images/1.19.jpg" alt="1.19 screenshot (replace)"></div>
          <div class="features"><h4>Main highlights</h4><ul id="v119_features"></ul></div>
        </div>
        <aside class="right">
          <h4>Why it mattered</h4>
          <p id="v119_why">Added Deep Dark, Warden and atmospheric biomes changing late-game exploration.</p>
          <div class="actions">
            <button class="btn ghost" data-target="v1.18">← Back</button>
            <button class="btn" data-target="v1.20">Next: 1.20 →</button>
          </div>
        </aside>
      </div>
    </article>

    <!-- V1.20 -->
    <article id="v1.20" class="version">
      <div class="vhead"><h3 id="v120_title">Minecraft 1.20 — Trails & Tales</h3><div class="meta">Release: 7 Jun 2023</div></div>
      <div class="vwrap">
        <div class="left">
          <div class="sshot"><img src="images/1.20.jpg" alt="1.20 screenshot (replace)"></div>
          <div class="features"><h4>Main highlights</h4><ul id="v120_features"></ul></div>
        </div>
        <aside class="right">
          <h4>Why it mattered</h4>
          <p id="v120_why">Focused on archaeology, cosmetics and world flavor.</p>
          <div class="actions">
            <button class="btn ghost" data-target="v1.19">← Back</button>
            <button class="btn" data-target="home">Back to home</button>
          </div>
        </aside>
      </div>
    </article>

  </section>

  <!-- CONTACT -->
  <section id="contact" class="page">
    <h2>Contact</h2>
    <p>If you want to suggest something — email: <b>ironcarrier.dev@gmail.com</b></p>
  </section>

  <div class="footer">© 2025 Minecraft Sky Realm — fan project by Ironcarrier</div>
</main>

<script>
/* ========== DATA (multilanguage) ========== */
const DATA = {
  en: {
    ui: { hero_title: "Versions & AI — Minecraft Sky Realm", hero_lead: "Choose version or search. Replace screenshots in /images/ with your own.", latest: "Latest highlights", ai: "AI in Minecraft", about: "About" },
    versions: {
      "1.16.5": { title:"Minecraft 1.16.5 — Nether Update", meta:"Release: 15 Jan 2021", features:[
        "New Nether biomes (Crimson/Warped/Soul Sand Valley/Basalt Deltas).",
        "Piglins — trading mechanics and AI behavior.",
        "Netherite — top-tier gear that doesn't burn.",
        "Ancient Debris for Netherite crafting.",
        "Hoglins, Zoglins and Striders.",
        "Respawn Anchor to respawn in the Nether."
      ], why:"Nether became a rich exploration dimension.", notes:"Many servers stayed on 1.16.x for plugin compatibility." },
      "1.17": { title:"Minecraft 1.17 — Caves & Cliffs I", meta:"Release: 8 Jun 2021", features:[
        "Axolotls — aquatic companions.",
        "Glow Squid — luminous mob.",
        "Copper ore and oxidation; Spyglass and Lightning Rod.",
        "Amethyst geodes and dripstone mechanics."
      ], why:"Added materials and mobs ahead of terrain overhaul." },
      "1.18": { title:"Minecraft 1.18 — Caves & Cliffs II", meta:"Release: 30 Nov 2021", features:[
        "World generation overhaul — new mountains and caves.",
        "World height changes and new ore distribution.",
        "Lush caves and dripstone caves."
      ], why:"Changed map generation and exploration mechanics." },
      "1.19": { title:"Minecraft 1.19 — The Wild Update", meta:"Release: 7 Jun 2022", features:[
        "Deep Dark and Warden boss.",
        "Ancient Cities and unique loot.",
        "Mangrove swamps, frogs and mud."
      ], why:"Late-game threats and atmospheric biomes." },
      "1.20": { title:"Minecraft 1.20 — Trails & Tales", meta:"Release: 7 Jun 2023", features:[
        "Archaeology and Sniffer mob.",
        "Cherry groves and armor trims.",
        "Camels and new building blocks."
      ], why:"Focus on creativity, story and decoration." }
    }
  },

  ru: {
    ui:{ hero_title:"Версии и ИИ — Minecraft Sky Realm", hero_lead:"Выберите версию или воспользуйтесь поиском. Замените скриншоты в /images/." , latest:"Последние", ai:"ИИ в Minecraft", about:"О проекте" },
    versions:{
      "1.16.5": { title:"Minecraft 1.16.5 — Nether Update", meta:"Релиз: 15 января 2021", features:[
        "Новые биомы Незера: Crimson, Warped, Soul Sand Valley, Basalt Deltas.",
        "Пиглины: механики торговли и поведение.",
        "Незерит: лучшая броня/инструменты, не горит в лаве.",
        "Ancient Debris для крафта незерита.",
        "Хоглины, зоглины и страйдеры.",
        "Respawn Anchor — возрождение в Незере."
      ], why:"Незер стал полноценным миром для исследования.", notes:"Многие сервера оставались на 1.16.x из-за плагинов." },
      "1.17": { title:"Minecraft 1.17 — Caves & Cliffs I", meta:"Релиз: 8 июня 2021", features:[
        "Аксолотли — подводные спутники.",
        "Светящиеся кальмары — новый моб.",
        "Медь и окисление; телескоп и громоотвод.",
        "Аметистовые геоды и капельники."
      ], why:"Добавлены материалы и мобы перед переработкой ландшафта." },
      "1.18": { title:"Minecraft 1.18 — Caves & Cliffs II", meta:"Релиз: 30 ноября 2021", features:[
        "Переработка генерации мира — новые горы и пещеры.",
        "Изменение высоты мира и распределения руд.",
        "Пышные пещеры и капельниковые системы."
      ], why:"Изменена механика генерации карт и исследования." },
      "1.19": { title:"Minecraft 1.19 — The Wild Update", meta:"Релиз: 7 июня 2022", features:[
        "Глубокая тьма и босс Вардэн.",
        "Древние города с уникальным лутом.",
        "Мангровые болота, лягушки и грязь."
      ], why:"Опасный контент поздней игры и атмосферные биомы." },
      "1.20": { title:"Minecraft 1.20 — Trails & Tales", meta:"Релиз: 7 июня 2023", features:[
        "Археология и моб Sniffer.",
        "Вишнёвая роща и узоры для брони.",
        "Верблюды и новые строительные блоки."
      ], why:"Акцент на креативности и сторителлинге." }
    }
  },

  uk: { /* Ukrainian - simplified: use RU as base if you want to edit later */
    ui:{ hero_title:"Версії та ІІ — Minecraft Sky Realm", hero_lead:"Оберіть версію або скористайтеся пошуком.", latest:"Останні", ai:"ІІ в Minecraft", about:"Про проєкт" },
    versions: {} // will fallback to EN/RU if missing
  },

  kk: { ui:{ hero_title:"Нұсқалар және ЖИ — Minecraft Sky Realm", hero_lead:"Нұсқаны таңдаңыз немесе іздеуді пайдаланыңыз.", latest:"Жаңа", ai:"ЖИ Minecraft-та", about:"Жоба туралы" }, versions:{} },

  es: { ui:{ hero_title:"Versiones y IA — Minecraft Sky Realm", hero_lead:"Elige una versión o usa la búsqueda.", latest:"Últimas", ai:"IA en Minecraft", about:"Sobre el proyecto" }, versions:{} }
};

/* merge English into missing locales for versions */
['uk','kk','es'].forEach(lang => {
  if(!DATA[lang].versions || Object.keys(DATA[lang].versions).length===0) {
    DATA[lang].versions = JSON.parse(JSON.stringify(DATA.en.versions));
    // for uk/kk/es you can later override specific strings if needed
  }
});

/* ========= DOM refs ========= */
const langSel = document.getElementById('lang');
const navBtns = document.querySelectorAll('.top-nav .navbtn');
const pages = document.querySelectorAll('.page');
const versionEls = document.querySelectorAll('.version');
const globalSearch = document.getElementById('globalSearch');

/* fill version feature lists from DATA (active language will update later) */
function populateFeatures(lang) {
  Object.keys(DATA[lang].versions).forEach(k=>{
    const id = 'v' + k;
    const blockUl = document.getElementById(id)?.querySelector('ul');
    if(blockUl) {
      blockUl.innerHTML = '';
      DATA[lang].versions[k].features.forEach(f => {
        const li = document.createElement('li'); li.textContent = f; blockUl.appendChild(li);
      });
      // title/meta
      const titleEl = document.getElementById(id)?.querySelector('h3');
      if(titleEl) titleEl.textContent = DATA[lang].versions[k].title;
      const metaEl = document.getElementById(id)?.querySelector('.meta');
      if(metaEl) metaEl.textContent = DATA[lang].versions[k].meta || '';
      // why / notes
      const why = document.getElementById(id)?.querySelector('[id$="_why"]');
      if(why) why.textContent = DATA[lang].versions[k].why || '';
      const notes = document.getElementById(id)?.querySelector('.notes');
      if(notes) notes.textContent = DATA[lang].versions[k].notes || '';
    }
  });
}

/* set UI texts (hero/about/latest) */
function setUIText(lang) {
  const ui = DATA[lang].ui || DATA.en.ui;
  document.getElementById('ui_hero_title').textContent = ui.hero_title;
  document.getElementById('ui_hero_lead').textContent = ui.hero_lead;
  document.getElementById('ui_latest_title').textContent = ui.latest;
  document.getElementById('ui_ai_title').textContent = ui.ai;
  document.getElementById('ui_about_title').textContent = ui.about;
  // about page texts
  document.getElementById('ui_about_h').textContent = ui.about;
  document.getElementById('ui_about_body').textContent = DATA[lang].ui?.about_text || "Fan-made project by Ironcarrier.";
}

/* navigation handlers (with heavy animation) */
let currentVersion = null;
async function showPage(pageId) {
  // hide all pages
  pages.forEach(p => p.classList.remove('active'));
  // if pageId corresponds to a version id (v1.16.5 etc) - animate switch
  if(pageId && pageId.startsWith('v')) {
    const toEl = document.getElementById(pageId);
    if(!toEl) return;
    const fromEl = currentVersion ? document.getElementById(currentVersion) : null;
    // animate out from current version
    if(fromEl) {
      fromEl.classList.add('anim-out');
      await new Promise(r => fromEl.addEventListener('animationend', r, {once:true}));
      fromEl.classList.remove('anim-out','active');
    } else {
      // hide home cards smoothly
      document.getElementById('home').classList.remove('active');
    }
    // animate in
    toEl.classList.add('active','anim-in');
    await new Promise(r => toEl.addEventListener('animationend', r, {once:true}));
    toEl.classList.remove('anim-in');
    currentVersion = pageId;
    // scroll top
    window.scrollTo({top:0, behavior:'smooth'});
    return;
  }

  // non-version page (home/about/versions/contact)
  currentVersion = null;
  pages.forEach(p => p.classList.remove('active'));
  document.getElementById(pageId).classList.add('active');
  window.scrollTo({top:0, behavior:'smooth'});
}

/* nav button listeners */
navBtns.forEach(b=>{
  b.addEventListener('click', ()=> {
    showPage(b.dataset.page);
  });
});

/* quick buttons in hero */
document.querySelectorAll('.btn[data-target]').forEach(btn=>{
  btn.addEventListener('click', ()=> {
    const t = btn.getAttribute('data-target');
    showPage(t);
  });
});

/* version internal navigation */
document.querySelectorAll('.actions [data-target]').forEach(b=>{
  b.addEventListener('click', ()=> {
    const t = b.getAttribute('data-target');
    // normalize
    if(t === 'home') showPage('home'); else showPage(t);
  });
});

/* language switcher */
langSel.addEventListener('change', ()=> {
  const lang = langSel.value;
  populateFeatures(lang);
  setUIText(lang);
});

/* initial populate */
populateFeatures('en');
setUIText('en');

/* global search: search through version titles, features and hero text.
   pressing Enter navigates to first match if it is a version.
*/
globalSearch.addEventListener('keydown', (e)=>{
  if(e.key === 'Enter') {
    doSearch(globalSearch.value.trim());
  }
});

function doSearch(q) {
  if(!q) return;
  const lang = langSel.value;
  const lower = q.toLowerCase();
  // search versions
  for(const k of Object.keys(DATA[lang].versions)) {
    const v = DATA[lang].versions[k];
    const hay = (v.title + ' ' + v.features.join(' ') + ' ' + (v.meta||'')).toLowerCase();
    if(hay.includes(lower)) {
      showPage('v'+k);
      return;
    }
  }
  // if not found, show a small alert (or could show results list)
  alert((lang === 'ru') ? 'Ничего не найдено' : (lang==='en'?'No results found':'Ничего не найдено'));
}

/* keyboard: Escape to go home if in version */
document.addEventListener('keydown', (e)=>{
  if(e.key === 'Escape') {
    if(currentVersion) showPage('home');
  }
});

/* parallax bg movement on mouse move / scroll (subtle) */
const bg = document.getElementById('bgLayer');
let lastX=0,lastY=0;
document.addEventListener('mousemove', (ev)=>{
  const cw = window.innerWidth, ch = window.innerHeight;
  const nx = (ev.clientX - cw/2) / (cw/2);
  const ny = (ev.clientY - ch/2) / (ch/2);
  const tx = nx * 6; const ty = ny * 6;
  bg.style.transform = `translate3d(${tx}px, ${ty}px, 0) scale(1.02)`;
});
window.addEventListener('scroll', ()=>{
  const st = window.scrollY;
  bg.style.transform = `translate3d(0, ${st * 0.06}px, 0) scale(1.01)`;
});

/* allow replacing images: user puts files in /images/ named:
   about.jpg, 1.16.5.jpg, 1.17.jpg, 1.18.jpg, 1.19.jpg, 1.20.jpg, sky_parallax.jpg
*/

/* small helper to ensure deep-linking by hash (optional) */
if(location.hash) {
  const h = location.hash.replace('#','');
  if(h.startsWith('v')) {
    setTimeout(()=> showPage(h), 200);
  } else if(h === 'about' || h === 'versions' || h === 'contact') {
    setTimeout(()=> showPage(h), 200);
  }
}
</script>
</body>
</html>
